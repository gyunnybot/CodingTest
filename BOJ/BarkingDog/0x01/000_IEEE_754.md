# IEEE 754 Float Bias가 127인 이유

IEEE 754 표준에서 32비트 float의 exponent는 8비트이며, 이를 통해 0~255(총 256개)의 값을 표현할 수 있습니다. 이때 bias를 왜 **127**로 설정했는지를 아래와 같이 설명합니다.

## 1. Bias란?

- 부동소수점에서 exponent는 실제 지수 값 + bias로 저장됩니다.
- 이는 **부호 없는 정수로 음/양의 지수 모두 표현하기 위함**입니다.

## 2. 8비트 exponent의 중간값

- 표현 가능한 값: 0 ~ 255 → 총 256개
- 중간값은 `127.5`
- **정수만 사용 가능**하므로 내림하여 `bias = 127` 선택

## 3. 정규화된 float에서의 실제 지수 범위

| Exponent 비트 값 (8bit) | 실제 지수 (Exponent - Bias) | 의미                          |
|------------------------|------------------------------|-------------------------------|
| 0                      | -127                         | Denormalized 숫자 (특수 처리) |
| 1                      | -126                         | 정규화된 최소 지수             |
| ...                    | ...                          | ...                           |
| 127                    | 0                            | 기준 지수 (Bias)              |
| ...                    | ...                          | ...                           |
| 254                    | +127                         | 정규화된 최대 지수             |
| 255                    | -                            | NaN, +∞, -∞ 등 특수 용도       |

> 참고: 실제 정규화된 숫자들은 exponent 비트가 `1~254`일 때만 해당됩니다.

## 4. 왜 128이 아닌가?

- 127.5를 내림해서 정수 127을 선택
- 이는 실제 지수를 1 ~ 254 -> -126 ~ +127 범위로 변경합니다
- 음/양 지수를 거의 대칭적으로 표현할 수 있게 해줍니다
- `0`과 `255`는 특수 용도로 남기기 위해 정규 지수 표현에서 제외합니다

## 5. 요약

- Bias = 127은 8비트 exponent에서 음수와 양수 지수를 거의 대칭적으로 표현할 수 있게 해줌
- 중간값이 127.5이므로 내림하여 127 선택
- 0과 255는 특수 숫자(NaN, Infinity 등)를 위해 예약

## 6. 알아두면 좋은 공식

1. **10진수 실수를 2진수 실수로 바꾸는 공식**:

    10진수 실수를 2진수 실수로 바꿀 때는 정수부와 소수부를 따로 계산 후 합칩니다.
    
    예를 들어 10진수 실수 -6.25에서 6은 2진수 정수 110(2)로 나타낼 수 있습니다.
    
    0.25의 경우 소수 부분이 0이 될 때까지 2씩 곱합니다. 이때 각 결과값의 정수 부분만을 위에서부터 차례대로 저장합니다.

    예를 들어 -6.25의 경우 소수부는 0.25이고

    0.25 x 2 = 0.5 -> 0

    0.5 x 2  = 1   -> 1이 되므로(연산 종료)

    2진수 소수부에는 01이 저장됩니다. 따라서 10진수 실수 -6.25는 2진수 실수 -110.01로 변환됩니다.

    마지막으로 IEEE 754 표준의 bias 계산을 위해서 정수부를 한 자릿수로 변경해 exponent 비트에 쓰일 지수를 생성합니다.
    
    최종 변환 값은 -1.1001 x 2^2가 됩니다.

<br>

2. **bias = 2^(자료형에 따른 지수부의 최대 비트 - 1) - 1**:

    10진수 -6.25는 2진수 -1.1001 x 2^2로 나타낼 수 있습니다. 이를 float 자료형에 수를 저장한다면
    
    sign 비트에는 음수이므로 1을 저장합니다. (양수 0, 음수 1)
    
    exponent 비트에는 `bias(2^(8-1)-1) + 2의 지수(2) = 129`를 unsigned type 10000001로 저장합니다.

    fraction 비트는 2진수의 **소수 부분**만을 앞쪽에서부터 채우고 남는 공간은 0으로 패딩(Padding)합니다.

        1(1) 10000001(8) 1001 0000 0000 0000 0000 000(23)

    가수부(fraction)는 유효 숫자를 표현하므로 10진법의 수로 치환했을 때 약 2^23 ~= 10^6까지 정확도를 유지할 수 있습니다. 그래서 float의 유효숫자는 6자리인 것입니다.

    같은 논리로 double의 경우 가수부가 52비트로 구성되므로 2^52 ~= 10^15, 유효 숫자는 15자리입니다.